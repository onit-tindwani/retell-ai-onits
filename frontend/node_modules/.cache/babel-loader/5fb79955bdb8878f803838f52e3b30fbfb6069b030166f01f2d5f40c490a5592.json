{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CallHistory=()=>{const[calls,setCalls]=useState([]);const[isLoading,setIsLoading]=useState(true);const API_URL=process.env.REACT_APP_API_URL;useEffect(()=>{const fetchCalls=async()=>{try{const response=await fetch(\"\".concat(API_URL,\"/api/calls\"));if(!response.ok){throw new Error('Failed to fetch calls');}const data=await response.json();setCalls(data);}catch(error){console.error('Error fetching calls:',error);}finally{setIsLoading(false);}};fetchCalls();},[API_URL]);const formatDuration=seconds=>{const minutes=Math.floor(seconds/60);const remainingSeconds=seconds%60;return\"\".concat(minutes,\":\").concat(remainingSeconds.toString().padStart(2,'0'));};const formatDate=timestamp=>{return new Date(timestamp).toLocaleString();};if(isLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-100 flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600\"})});}return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-100\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-3xl mx-auto\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-white shadow sm:rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"px-4 py-5 sm:p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg leading-6 font-medium text-gray-900\",children:\"Call History\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flow-root\",children:/*#__PURE__*/_jsx(\"ul\",{className:\"-my-5 divide-y divide-gray-200\",children:calls.map(call=>/*#__PURE__*/_jsx(\"li\",{className:\"py-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-900 truncate\",children:call.phoneNumber}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:formatDate(call.timestamp)})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium \".concat(call.status==='completed'?'bg-green-100 text-green-800':call.status==='failed'?'bg-red-100 text-red-800':'bg-yellow-100 text-yellow-800'),children:call.status})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0 text-sm text-gray-500\",children:formatDuration(call.duration)}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(Link,{to:\"/active-call/\".concat(call.id),className:\"text-primary-600 hover:text-primary-900\",children:\"View Details\"})})]})},call.id))})})})]})})})})});};export default CallHistory;","map":{"version":3,"names":["React","useState","useEffect","Link","jsx","_jsx","jsxs","_jsxs","CallHistory","calls","setCalls","isLoading","setIsLoading","API_URL","process","env","REACT_APP_API_URL","fetchCalls","response","fetch","concat","ok","Error","data","json","error","console","formatDuration","seconds","minutes","Math","floor","remainingSeconds","toString","padStart","formatDate","timestamp","Date","toLocaleString","className","children","map","call","phoneNumber","status","duration","to","id"],"sources":["C:/Users/Admin/Desktop/Retell-AI-Onits/frontend/src/components/CallHistory.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\ninterface Call {\r\n  id: string;\r\n  phoneNumber: string;\r\n  duration: number;\r\n  status: 'completed' | 'failed' | 'missed';\r\n  timestamp: string;\r\n  transcript: string;\r\n}\r\n\r\nconst CallHistory: React.FC = () => {\r\n  const [calls, setCalls] = useState<Call[]>([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  const API_URL = process.env.REACT_APP_API_URL;\r\n\r\n  useEffect(() => {\r\n    const fetchCalls = async () => {\r\n      try {\r\n        const response = await fetch(`${API_URL}/api/calls`);\r\n        if (!response.ok) {\r\n          throw new Error('Failed to fetch calls');\r\n        }\r\n        const data = await response.json();\r\n        setCalls(data);\r\n      } catch (error) {\r\n        console.error('Error fetching calls:', error);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchCalls();\r\n  }, [API_URL]);\r\n\r\n  const formatDuration = (seconds: number): string => {\r\n    const minutes = Math.floor(seconds / 60);\r\n    const remainingSeconds = seconds % 60;\r\n    return `${minutes}:${remainingSeconds.toString().padStart(2, '0')}`;\r\n  };\r\n\r\n  const formatDate = (timestamp: string): string => {\r\n    return new Date(timestamp).toLocaleString();\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-100 flex items-center justify-center\">\r\n        <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-100\">\r\n      <div className=\"max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8\">\r\n        <div className=\"max-w-3xl mx-auto\">\r\n          <div className=\"bg-white shadow sm:rounded-lg\">\r\n            <div className=\"px-4 py-5 sm:p-6\">\r\n              <h3 className=\"text-lg leading-6 font-medium text-gray-900\">\r\n                Call History\r\n              </h3>\r\n              <div className=\"mt-6\">\r\n                <div className=\"flow-root\">\r\n                  <ul className=\"-my-5 divide-y divide-gray-200\">\r\n                    {calls.map((call) => (\r\n                      <li key={call.id} className=\"py-4\">\r\n                        <div className=\"flex items-center space-x-4\">\r\n                          <div className=\"flex-1 min-w-0\">\r\n                            <p className=\"text-sm font-medium text-gray-900 truncate\">\r\n                              {call.phoneNumber}\r\n                            </p>\r\n                            <p className=\"text-sm text-gray-500\">\r\n                              {formatDate(call.timestamp)}\r\n                            </p>\r\n                          </div>\r\n                          <div className=\"flex-shrink-0\">\r\n                            <span\r\n                              className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${\r\n                                call.status === 'completed'\r\n                                  ? 'bg-green-100 text-green-800'\r\n                                  : call.status === 'failed'\r\n                                  ? 'bg-red-100 text-red-800'\r\n                                  : 'bg-yellow-100 text-yellow-800'\r\n                              }`}\r\n                            >\r\n                              {call.status}\r\n                            </span>\r\n                          </div>\r\n                          <div className=\"flex-shrink-0 text-sm text-gray-500\">\r\n                            {formatDuration(call.duration)}\r\n                          </div>\r\n                          <div className=\"flex-shrink-0\">\r\n                            <Link\r\n                              to={`/active-call/${call.id}`}\r\n                              className=\"text-primary-600 hover:text-primary-900\"\r\n                            >\r\n                              View Details\r\n                            </Link>\r\n                          </div>\r\n                        </div>\r\n                      </li>\r\n                    ))}\r\n                  </ul>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CallHistory; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}